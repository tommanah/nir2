<!doctype HTML>
<html>
<head>
    <title>WebAR без маркеров</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        AFRAME.registerComponent('place-object', {
            init: function () {
                const el = this.el;

                // Создаем новый объект
                const box = document.createElement('a-box');
                box.setAttribute('material', 'color: red;');
                box.setAttribute('scale', '0.5 0.5 0.5');
                el.sceneEl.appendChild(box); // Добавляем куб в сцену

                // Обработчик события клика
                el.sceneEl.addEventListener('click', function (event) {
                    console.log("Клик зарегистрирован"); // Лог при клике

                    // Получаем позицию клика в мире
                    const intersection = event.detail.intersection;
                    console.log("Intersection:", intersection); // Лог для проверки пересечения

                    if (intersection) {
                        // Устанавливаем позицию объекта на место клика
                        box.setAttribute('position', intersection.point);
                        console.log("Куб добавлен на позицию:", intersection.point); // Лог для проверки позиции
                    } else {
                        console.log("Нет пересечения"); // Лог, если пересечение не найдено
                    }
                });

                // Обработчик события мыши
                el.sceneEl.addEventListener('mousedown', function (event) {
                    console.log("Клик мыши зарегистрирован"); // Лог при клике мыши

                    // Получаем позицию клика в мире
                    const intersection = event.detail.intersection;
                    console.log("Intersection (мышь):", intersection); // Лог для проверки пересечения

                    if (intersection) {
                        // Устанавливаем позицию объекта на место клика
                        box.setAttribute('position', intersection.point);
                        console.log("Куб добавлен на позицию (мышь):", intersection.point); // Лог для проверки позиции
                    } else {
                        console.log("Нет пересечения (мышь)"); // Лог, если пересечение не найдено
                    }
                });
            }
        });
    </script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <a-scene embedded arjs='sourceType: webcam;'>
        <a-entity camera></a-entity>
        <a-entity place-object></a-entity> <!-- Добавляем компонент для размещения объекта -->
    </a-scene>
</body>
</html>